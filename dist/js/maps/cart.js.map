{"version":3,"file":"../cart.js","sources":["cart.js"],"sourcesContent":["var cart = document.getElementsByClassName('cart-content');\r\nif (cart.length>0){\r\n\r\n\r\n    /* CART 1 */\r\n\r\n    function addInputListener(input) {\r\n\r\n        let row = input.parentElement.parentElement.parentElement;\r\n        \r\n        let overallPriceElement = row.querySelector('.cart-item-price span');\r\n        let price = parseFloat(row.querySelector('.cart-item-price-pc span').innerText.replace(/,/g, '.')); \r\n\r\n\r\n\r\n\r\n        let calcEvent = function() {\r\n\r\n            if (this.value > 0) {\r\n                overallPriceElement.innerText = (price * this.value).toString();\r\n            } else {\r\n                overallPriceElement.innerText = \"0\";\r\n            }\r\n\r\n\r\n            var codePriceN = 0;\r\n\r\n            const codePrice =  parseFloat(document.getElementById('codePrice').innerText);\r\n\r\n            if (codePrice){\r\n              codePriceN = codePrice;\r\n            }else{\r\n               codePriceN = 0;\r\n            }\r\n\r\n\r\n            const pricegoods = document.querySelectorAll('.cart-item-price span ');\r\n            const result = Array.from(pricegoods).reduce((sum, spanElm) => sum + Number(spanElm.textContent), 0);\r\n\r\n            if (document.getElementById('codePriceWrap').innerHTML.indexOf(\"%\") != -1) { \r\n                codePriceNN = codePriceN*(-0.01);\r\n                const result_f = (result-(result*codePriceNN)).toString().replace(/\\./g, ',');\r\n                document.getElementById('goodsprice').innerText = result_f;\r\n            }else{\r\n                const result_f = (result+codePriceN).toString().replace(/\\./g, ',');\r\n                document.getElementById('goodsprice').innerText = result_f;\r\n            }\r\n            \r\n            \r\n\r\n            const pricesum = document.querySelectorAll('.cart-item-price span, #delprice');\r\n            const result2 = Array.from(pricesum).reduce((sum, spanElm) => sum + Number(spanElm.textContent), 0); \r\n\r\n            if (document.getElementById('codePriceWrap').innerHTML.indexOf(\"%\") != -1) { \r\n                codePriceNN = codePriceN*(-0.01);\r\n                const result2_f = (result2-(result*codePriceNN)).toString().replace(/\\./g, ',');\r\n                document.getElementById('sumprice').innerText = result2_f;\r\n            }else{\r\n                if(document.getElementById('codePrice').getAttribute(\"data-percentage\") === null){\r\n               \r\n                    const result2_f = (result2+codePriceN).toString().replace(/\\./g, ',');\r\n                    document.getElementById('sumprice').innerText = result2_f;\r\n\r\n                }else{\r\n                   \r\n                    const salePer = document.getElementById('codePrice').dataset.percentage;\r\n                    document.getElementById('codePrice').innerHTML = result2*salePer;\r\n\r\n                    const x = result2 - (result2*salePer);\r\n              \r\n                    const result2_f = (x).toString().replace(/\\./g, ',');\r\n                    document.getElementById('sumprice').innerText = result2_f;\r\n\r\n                }\r\n\r\n            }\r\n\r\n     \r\n            \r\n\r\n            let shipping = document.getElementById('cartFreeShipping');\r\n            let shippingTreshold = parseFloat(shipping.dataset.price);\r\n            let goodsPrice = parseFloat(document.getElementById('goodsprice').innerText.replace(/,/g, '.'));\r\n            let shippingLeft = shippingTreshold - goodsPrice;\r\n            if(shippingLeft <= 0){\r\n                shipping.innerHTML = \"Dopravu máte zdarma\";\r\n            }else{\r\n                shipping.innerHTML = \"Nakupte ještě za \" + shippingLeft + \" Kč a máte dopravu zdarma\";\r\n            }\r\n        \r\n\r\n        };\r\n        \r\n\r\n        input.addEventListener('change', calcEvent);\r\n        calcEvent.call(input); \r\n    }\r\n\r\n    function recountCart(){\r\n        let inputs = document.querySelectorAll('.cart-item-stepper .num_items');\r\n\r\n        for (let i = 0; i < inputs.length; i++) {\r\n            let input = inputs[i];\r\n            addInputListener(input);\r\n        }\r\n    \r\n    }\r\n    recountCart();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    /* CART 2 */\r\n    function recountDeliveryCart(){\r\n    var elms = document.querySelectorAll('.cart-table-shipping-item');\r\n\r\n    function deliveryCart() {\r\n        const pricedel = document.querySelectorAll('.cart-table-shipping-item input:checked ~ .cart-table-shipping-price span');\r\n        const deliveryprice = Array.from(pricedel).reduce((sum, spanElm) => sum + Number(spanElm.textContent), 0);\r\n        document.getElementById('delprice').innerText = deliveryprice;\r\n\r\n        var productprice = document.getElementById('goodsprice').textContent;\r\n        var pricecart2 = deliveryprice +  parseInt(productprice)\r\n        document.getElementById('sumprice').innerText = pricecart2;\r\n\r\n\r\n\r\n    };\r\n\r\n    for (var ia = 0; ia < elms.length; ia++) {\r\n        elms[ia].addEventListener('click', deliveryCart, false);\r\n    }\r\n    }\r\n    recountDeliveryCart();\r\n\r\n\r\n    /* CART 3 */\r\n    if(document.getElementById('cart-form-user')){\r\n\r\n        document.getElementById('regToggle').onclick = function() {\r\n            document.getElementById(\"cart-register-password\").toggleAttribute(\"required\");\r\n        }\r\n        document.getElementById('faToggle').onclick = function() {\r\n            document.getElementById(\"cart-fa-company\").toggleAttribute(\"required\");\r\n            document.getElementById(\"cart-fa-ico\").toggleAttribute(\"required\");\r\n            document.getElementById(\"cart-fa-street\").toggleAttribute(\"required\");\r\n            document.getElementById(\"cart-fa-city\").toggleAttribute(\"required\");\r\n            document.getElementById(\"cart-fa-psc\").toggleAttribute(\"required\");\r\n            document.getElementById(\"cart-fa-state\").toggleAttribute(\"required\");\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}"],"names":["cart","document","getElementsByClassName","addInputListener","input","row","parentElement","overallPriceElement","querySelector","price","parseFloat","innerText","replace","calcEvent","this","value","toString","codePriceN","codePrice","getElementById","pricegoods","querySelectorAll","result","Array","from","reduce","sum","spanElm","Number","textContent","innerHTML","indexOf","codePriceNN","result_f","pricesum","result2","result2_f","getAttribute","salePer","dataset","percentage","x","shipping","shippingLeft","addEventListener","call","recountCart","inputs","i","length","recountDeliveryCart","elms","deliveryCart","pricedel","deliveryprice","productprice","pricecart2","parseInt","ia","onclick","toggleAttribute"],"mappings":"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"}